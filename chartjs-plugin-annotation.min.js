/*@preserve!
 * chartjs-plugin-annotation.js
 * http://chartjs.org/
 * Version: 0.5.7
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/Chart.Annotation.js/blob/master/LICENSE.md
 */
!function i(o,a,l){function r(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},o[t][0].call(n.exports,function(e){return r(o[t][1][e]||e)},n,n.exports,i,o,a,l)}return a[t].exports}for(var s="function"==typeof require&&require,e=0;e<l.length;e++)r(l[e]);return r}({1:[function(e,t,n){},{}],2:[function(n,e,t){e.exports=function(e){var o=e.helpers,l=n("./helpers.js")(e),a=n("./events.js")(e),r=e.Annotation.types;function i(e){l.decorate(e,"afterDataLimits",function(e,t){e&&e(t),l.adjustScaleRange(t)})}function t(i){return function(e,t){var n=e.annotation.options.drawTime;l.elements(e).filter(function(e){return i===(e.options.drawTime||n)}).forEach(function(e){e.configure(),e.transition(t).draw()})}}function s(e){var t=e.plugins;return(t&&t.annotation?t.annotation:null)||e.annotation||{}}return{id:"annotation",beforeInit:function(e){var t=e.options,n=e.annotation={elements:{},options:l.initConfig(s(t)),onDestroy:[],firstRun:!0,supported:!1};e.ensureScalesHaveIDs(),t.scales&&(n.supported=!0,o.each(t.scales.xAxes,i),o.each(t.scales.yAxes,i))},beforeUpdate:function(i){var o,a=i.annotation;a.supported&&(a.firstRun?a.firstRun=!1:a.options=l.initConfig(s(i.options)),o=[],a.options.annotations.forEach(function(e){var t,n=e.id||l.objectId();!a.elements[n]&&r[e.type]?((t=new r[e.type]({id:n,options:e,chartInstance:i})).initialize(),a.elements[n]=t,e.id=n,o.push(n)):a.elements[n]&&o.push(n)}),Object.keys(a.elements).forEach(function(e){-1===o.indexOf(e)&&(a.elements[e].destroy(),delete a.elements[e])}))},beforeDatasetsDraw:t("beforeDatasetsDraw"),afterDatasetsDraw:t("afterDatasetsDraw"),afterDraw:t("afterDraw"),afterInit:function(t){var n,i,e=t.annotation.options.events;o.isArray(e)&&0<e.length&&(n=t.chart.canvas,i=a.customDispatcher.bind(t),a.collapseHoverEvents(e).forEach(function(e){o.addEvent(n,e,i),t.annotation.onDestroy.push(function(){o.removeEvent(n,e,i)})}))},destroy:function(e){if(e&&e.annotation)for(var t=e.annotation.onDestroy;0<t.length;)t.pop()()}}}},{"./events.js":4,"./helpers.js":5}],3:[function(e,t,n){t.exports=function(e){var t=e.helpers;return e.Element.extend({initialize:function(){this.hidden=!1,this.hovering=!1,this._model=t.clone(this._model)||{},this.setDataLimits()},destroy:function(){},setDataLimits:function(){},configure:function(){},inRange:function(){},getCenterPoint:function(){},getWidth:function(){},getHeight:function(){},getArea:function(){},draw:function(){}})}},{}],4:[function(t,e,n){e.exports=function(e){var s=e.helpers,c=t("./helpers.js")(e);function u(e){var t=!1,e=e.filter(function(e){switch(e){case"mouseenter":case"mouseover":case"mouseout":case"mouseleave":return!(t=!0);default:return!0}});return t&&-1===e.indexOf("mousemove")&&e.push("mousemove"),e}return{dispatcher:function(o){var e=this.annotation,t=c.elements(this),n=s.getRelativePosition(o,this.chart),i=c.getNearestItems(t,n),a=u(e.options.events),n=e.options.dblClickSpeed,l=[],e=c.getEventHandlerName(o.type),r=(i||{}).options;if("mousemove"===o.type&&(i&&!i.hovering?["mouseenter","mouseover"].forEach(function(e){var t=c.getEventHandlerName(e),e=c.createMouseEvent(e,o);i.hovering=!0,"function"==typeof r[t]&&l.push([r[t],e,i])}):i||t.forEach(function(n){var i;n.hovering&&(n.hovering=!1,i=n.options,["mouseout","mouseleave"].forEach(function(e){var t=c.getEventHandlerName(e),e=c.createMouseEvent(e,o);"function"==typeof i[t]&&l.push([i[t],e,n])}))})),i&&-1<a.indexOf("dblclick")&&"function"==typeof r.onDblclick){if("click"===o.type&&"function"==typeof r.onClick)return clearTimeout(i.clickTimeout),i.clickTimeout=setTimeout(function(){delete i.clickTimeout,r.onClick.call(i,o)},n),o.stopImmediatePropagation(),void o.preventDefault();"dblclick"===o.type&&i.clickTimeout&&(clearTimeout(i.clickTimeout),delete i.clickTimeout)}i&&"function"==typeof r[e]&&0===l.length&&l.push([r[e],o,i]),0<l.length&&(o.stopImmediatePropagation(),o.preventDefault(),l.forEach(function(e){e[0].call(e[2],e[1])}))},collapseHoverEvents:u,customDispatcher:function(o){var e=this.annotation,t=c.elements(this),n=s.getRelativePosition(o,this.chart),i=c.getNearestItem(t,n),a=u(e.options.events),n=e.options.dblClickSpeed,l=[],e=c.getEventHandlerName(o.type),r=(i||{}).options;if("mousemove"===o.type&&(i&&!i.hovering?(t.forEach(function(n){var i;n.hovering&&(n.hovering=!1,i=n.options,["mouseout","mouseleave"].forEach(function(e){var t=c.getEventHandlerName(e),e=c.createMouseEvent(e,o);"function"==typeof i[t]&&l.push([i[t],e,n])}))}),["mouseenter","mouseover"].forEach(function(e){var t=c.getEventHandlerName(e),e=c.createMouseEvent(e,o);i.hovering=!0,"function"==typeof r[t]&&l.push([r[t],e,i])})):i||t.forEach(function(n){var i;n.hovering&&(n.hovering=!1,i=n.options,["mouseout","mouseleave"].forEach(function(e){var t=c.getEventHandlerName(e),e=c.createMouseEvent(e,o);"function"==typeof i[t]&&l.push([i[t],e,n])}))})),i&&-1<a.indexOf("dblclick")&&"function"==typeof r.onDblclick){if("click"===o.type&&"function"==typeof r.onClick)return clearTimeout(i.clickTimeout),i.clickTimeout=setTimeout(function(){delete i.clickTimeout,r.onClick.call(i,o)},n),o.stopImmediatePropagation(),void o.preventDefault();"dblclick"===o.type&&i.clickTimeout&&(clearTimeout(i.clickTimeout),delete i.clickTimeout)}i&&"function"==typeof r[e]&&0===l.length&&l.push([r[e],o,i]),0<l.length&&(o.stopImmediatePropagation(),o.preventDefault(),l.forEach(function(e){e[0].call(e[2],e[1])}))}}}},{"./helpers.js":5}],5:[function(e,t,n){function i(){}function l(e){var t=e.annotation.elements;return Object.keys(t).map(function(e){return t[e]})}function o(){return Math.random().toString(36).substr(2,6)}function r(e){return null!=e&&("number"==typeof e?isFinite(e):!!e)}function s(t,n,i){t["$"+n]||(t[n]?(t["$"+n]=t[n].bind(t),t[n]=function(){var e=[t["$"+n]].concat(Array.prototype.slice.call(arguments));return i.apply(t,e)}):t[n]=function(){var e=[void 0].concat(Array.prototype.slice.call(arguments));return i.apply(t,e)})}function c(e,t){e.forEach(function(e){(t?e[t]:e)()})}function u(e){return"on"+e[0].toUpperCase()+e.substring(1)}function d(t,n){try{return new MouseEvent(t,n)}catch(e){try{var i=document.createEvent("MouseEvent");return i.initMouseEvent(t,n.canBubble,n.cancelable,n.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget),i}catch(e){i=document.createEvent("Event");return i.initEvent(t,n.canBubble,n.cancelable),i}}}t.exports=function(t){var a=t.helpers;return{initConfig:function(e){return e=a.configMerge(t.Annotation.defaults,e),a.isArray(e.annotations)&&e.annotations.forEach(function(e){e.label=a.configMerge(t.Annotation.labelDefaults,e.label)}),e},elements:l,callEach:c,noop:i,objectId:o,isValid:r,decorate:s,adjustScaleRange:function(e){var t,n,i,o=(t=e.id,n=l(e.chart),i=e.min,o=e.max,{min:(n=n.filter(function(e){return!!e._model.ranges[t]}).map(function(e){return e._model.ranges[t]})).map(function(e){return Number(e.min)}).reduce(function(e,t){return isFinite(t)&&!isNaN(t)&&t<e?t:e},i),max:n.map(function(e){return Number(e.max)}).reduce(function(e,t){return isFinite(t)&&!isNaN(t)&&e<t?t:e},o)});void 0===e.options.ticks.min&&void 0===e.options.ticks.suggestedMin&&(e.min=o.min),void 0===e.options.ticks.max&&void 0===e.options.ticks.suggestedMax&&(e.max=o.max),e.handleTickRangeOptions&&e.handleTickRangeOptions()},getNearestItems:function(e,i){var o=Number.POSITIVE_INFINITY;return e.filter(function(e){return e.inRange(i.x,i.y)}).reduce(function(e,t){var n=t.getCenterPoint(),n=a.distanceBetweenPoints(i,n);return n<o?(e=[t],o=n):n===o&&e.push(t),e},[]).sort(function(e,t){var n=e.getArea(),i=t.getArea();return i<n||n<i?n-i:e._index-t._index}).slice(0,1)[0]},getEventHandlerName:u,createMouseEvent:d,getNearestItem:function(e,t){return e.filter(function(e){return e.inRange(t.x,t.y)}).pop()}}}},{}],6:[function(e,t,n){var i=e("chart.js");(i="function"==typeof i?i:window.Chart).Annotation=i.Annotation||{},i.Annotation.drawTimeOptions={afterDraw:"afterDraw",afterDatasetsDraw:"afterDatasetsDraw",beforeDatasetsDraw:"beforeDatasetsDraw"},i.Annotation.defaults={drawTime:"afterDatasetsDraw",dblClickSpeed:350,events:[],annotations:[]},i.Annotation.labelDefaults={backgroundColor:"rgba(0,0,0,0.8)",fontFamily:i.defaults.global.defaultFontFamily,fontSize:i.defaults.global.defaultFontSize,fontStyle:"bold",fontColor:"#fff",xPadding:6,yPadding:6,cornerRadius:6,position:"center",xAdjust:0,yAdjust:0,enabled:!1,content:null},i.Annotation.Element=e("./element.js")(i),i.Annotation.types={line:e("./types/line.js")(i),box:e("./types/box.js")(i)};e=e("./annotation.js")(i);t.exports=e,i.pluginService.register(e)},{"./annotation.js":2,"./element.js":3,"./types/box.js":8,"./types/line.js":9,"chart.js":1}],7:[function(e,t,n){var u=e("./util.js");function c(e,t,n,i,o,a){return"line"===n.type?function(e,t,n,i,o,a){var l={},r=0,s=0;switch(!0){case i===u.verticalKeyword&&"top"===e.labelPosition:r=o/2+e.labelXAdjust,s=e.labelYPadding+e.labelYAdjust,l.y=t.y1+s,l.x=(isFinite(n.m)?n.getX(l.y):t.x1)-r;break;case i===u.verticalKeyword&&"bottom"===e.labelPosition:r=o/2+e.labelXAdjust,s=a+e.labelYPadding+e.labelYAdjust,l.y=t.y2-s,l.x=(isFinite(n.m)?n.getX(l.y):t.x1)-r;break;case i===u.horizontalKeyword&&"left"===e.labelPosition:r=e.labelXPadding+e.labelXAdjust,s=-a/2+e.labelYAdjust,l.x=t.x1+r,l.y=n.getY(l.x)+s;break;case i===u.horizontalKeyword&&"right"===e.labelPosition:r=o+e.labelXPadding+e.labelXAdjust,s=-a/2+e.labelYAdjust,l.x=t.x2-r,l.y=n.getY(l.x)+s;break;default:var c=d(t.x1,t.x2,t.y1,t.y2,o,a);c.x+=e.labelXAdjust,c.y+=e.labelYAdjust,Object.assign(l,c)}return l}(e,t,n,i,o,a):"box"===n.type?function(e,t,n,i,o){var a={},l=0,r=0;switch(e.labelPosition){case"top":l=-i/2,r=e.labelYPadding-2*o,a.y=t.y1+r+e.labelYAdjust,a.x=n.getX()+l+e.labelXAdjust;break;case"bottom":l=-i/2,r=o-e.labelYPadding,a.y=t.y2+r+e.labelYAdjust,a.x=n.getX()+l+e.labelXAdjust;break;case"left":l=-i-e.labelXPadding,r=-o/2,a.x=t.x1+l+e.labelXAdjust,a.y=n.getY()+r+e.labelYAdjust;break;case"right":l=e.labelXPadding,r=-o/2,a.x=t.x2+l+e.labelXAdjust,a.y=n.getY()+r+e.labelYAdjust;break;case"top-left":r=e.labelYPadding-2*o,a.y=t.y1+r+e.labelYAdjust,a.x=t.x1+e.labelXAdjust;break;default:var s=d(t.x1,t.x2,t.y1,t.y2,i,o);s.x+=e.labelXAdjust,s.y+=e.labelYAdjust,Object.assign(a,s)}return a}(e,t,n,o,a):{x:0,y:0}}function d(e,t,n,i,o,a){return{x:(t+e-(o||0))/2,y:(n+i-(a||0))/2}}t.exports={getLabelConfig:function(e,t,n,i,o){var a={labelBackgroundColor:(s=n.label||{}).backgroundColor,labelFontFamily:s.fontFamily,labelFontSize:s.fontSize,labelFontStyle:s.fontStyle,labelFontColor:s.fontColor,labelXPadding:s.xPadding,labelYPadding:s.yPadding,labelCornerRadius:s.cornerRadius,labelPosition:s.position,labelXAdjust:s.xAdjust,labelYAdjust:s.yAdjust,labelEnabled:s.enabled,labelContent:s.content},l=i.fontString(a.labelFontSize,a.labelFontStyle,a.labelFontFamily),r=o.measureText(a.labelContent).width,s=a.labelFontSize;return a.labelHeight=s+2*a.labelYPadding,a.labelContent&&i.isArray(a.labelContent)&&(i=a.labelContent.slice(0).sort(function(e,t){return t.length-e.length})[0],r=o.measureText(i).width,a.labelHeight=s*a.labelContent.length+2*a.labelYPadding,a.labelHeight+=a.labelYPadding*(a.labelContent.length-1)),s=c(a,e,t,n.mode,r,s),a.labelX=s.x-a.labelXPadding,a.labelY=s.y-a.labelYPadding,a.labelWidth=r+2*a.labelXPadding,a.borderColor=n.borderColor,a.borderWidth=n.borderWidth,a.borderDash=n.borderDash||[],a.borderDashOffset=n.borderDashOffset||0,{model:a,ctx:{font:l}}},getCenterPoint:d,drawLabel:function(e,t,n){if(e.labelEnabled&&e.labelContent)if(t.beginPath(),t.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),t.clip(),t.fillStyle=e.labelBackgroundColor,n.drawRoundedRectangle(t,e.labelX,e.labelY,e.labelWidth,e.labelHeight,e.labelCornerRadius),t.fill(),t.font=n.fontString(e.labelFontSize,e.labelFontStyle,e.labelFontFamily),t.fillStyle=e.labelFontColor,t.textAlign="center",e.labelContent&&n.isArray(e.labelContent))for(var i=e.labelY+e.labelYPadding,o=0;o<e.labelContent.length;o++)t.textBaseline="top",t.fillText(e.labelContent[o],e.labelX+e.labelWidth/2,i),i+=e.labelFontSize+e.labelYPadding;else t.textBaseline="middle",t.fillText(e.labelContent,e.labelX+e.labelWidth/2,e.labelY+e.labelHeight/2)},isOnLabel:function(e,t,n){return n.labelEnabled&&n.labelContent&&e>=n.labelX&&e<=n.labelX+n.labelWidth&&t>=n.labelY&&t<=n.labelY+n.labelHeight}}},{"./util.js":10}],8:[function(t,e,n){e.exports=function(e){var h=t("../helpers.js")(e),b=t("../labelUtil.js"),g=e.helpers;function p(e){this.type="box",this.getX=function(){return(e.left+e.right)/2},this.getY=function(){return(e.bottom+e.top)/2}}return e.Annotation.Element.extend({setDataLimits:function(){var e,t=this._model,n=this.options,i=this.chartInstance,o=i.scales[n.xScaleID],a=i.scales[n.yScaleID],l=i.chartArea;t.ranges={},l&&(i=e=0,o&&(e=h.isValid(n.xMin)?n.xMin:o.getValueForPixel(l.left),i=h.isValid(n.xMax)?n.xMax:o.getValueForPixel(l.right),t.ranges[n.xScaleID]={min:Math.min(e,i),max:Math.max(e,i)}),a&&(e=h.isValid(n.yMin)?n.yMin:a.getValueForPixel(l.bottom),i=h.isValid(n.yMax)?n.yMax:a.getValueForPixel(l.top),t.ranges[n.yScaleID]={min:Math.min(e,i),max:Math.max(e,i)}))},configure:function(){var e=this._model,t=this.options,n=this.chartInstance,i=n.scales[t.xScaleID],o=n.scales[t.yScaleID],a=n.chartArea,l=n.chart.ctx;e.clip={x1:a.left,x2:a.right,y1:a.top,y2:a.bottom};var r,s,c=a.left,u=a.top,d=a.right,n=a.bottom;i&&(r=h.isValid(t.xMin)?i.getPixelForValue(t.xMin):a.left,s=h.isValid(t.xMax)?i.getPixelForValue(t.xMax):a.right,c=Math.min(r,s),d=Math.max(r,s)),o&&(r=h.isValid(t.yMin)?o.getPixelForValue(t.yMin):a.bottom,s=h.isValid(t.yMax)?o.getPixelForValue(t.yMax):a.top,u=Math.min(r,s),n=Math.max(r,s)),e.left=c,e.top=u,e.right=d,e.bottom=n;var f=b.getLabelConfig({x1:c,x2:d,y1:u,y2:n},new p(e),t,g,l);Object.assign(e,f.model),Object.keys(f.ctx).forEach(function(e){l[e]=f.ctx[e]}),e.borderColor=t.borderColor,e.borderWidth=t.borderWidth,e.backgroundColor=t.backgroundColor},inRange:function(e,t){var n=this._model;return n&&e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom||b.isOnLabel(e,t,n)},getCenterPoint:function(){var e=this._model;return b.getCenterPoint(e.left,e.right,e.bottom,e.top)},getWidth:function(){var e=this._model;return Math.abs(e.right-e.left)},getHeight:function(){var e=this._model;return Math.abs(e.bottom-e.top)},getArea:function(){return this.getWidth()*this.getHeight()},draw:function(){var e=this._view,t=this.chartInstance.chart.ctx;t.save(),t.beginPath(),t.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),t.clip(),t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,t.fillStyle=e.backgroundColor;var n=e.right-e.left,i=e.bottom-e.top;t.fillRect(e.left,e.top,n,i),t.strokeRect(e.left,e.top,n,i),b.drawLabel(e,t,g),t.restore()}})}},{"../helpers.js":5,"../labelUtil.js":7}],9:[function(t,e,n){e.exports=function(e){var s=t("../labelUtil.js"),c=t("../util.js"),u=e.helpers,d=t("../helpers.js")(e);function f(t){this.type="line";var n=(t.x2-t.x1)/(t.y2-t.y1),i=t.x1||0;this.m=n,this.b=i,this.getX=function(e){return n*(e-t.y1)+i},this.getY=function(e){return(e-i)/n+t.y1},this.intersects=function(e,t,n){n=n||.001;var i=this.getY(e),o=this.getX(t);return(!isFinite(i)||Math.abs(t-i)<n)&&(!isFinite(o)||Math.abs(e-o)<n)}}return e.Annotation.Element.extend({setDataLimits:function(){var e=this._model,t=this.options;e.ranges={},e.ranges[t.scaleID]={min:t.value,max:t.endValue||t.value}},configure:function(){var e,t,n,i=this._model,o=this.options,a=this.chartInstance,l=a.chart.ctx,r=a.scales[o.scaleID];r&&(e=d.isValid(o.value)?r.getPixelForValue(o.value,o.value.index):NaN,t=d.isValid(o.endValue)?r.getPixelForValue(o.endValue,o.value.index):e),isNaN(e)||(a=a.chartArea,i.clip={x1:a.left,x2:a.right,y1:a.top,y2:a.bottom},this.options.mode===c.horizontalKeyword?(i.x1=a.left,i.x2=a.right,i.y1=e,i.y2=t):(i.y1=a.top,i.y2=a.bottom,i.x1=e,i.x2=t),t=new f(i),i.line=t,i.mode=o.mode,n=s.getLabelConfig({x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},t,o,u,l),Object.assign(i,n.model),Object.keys(n.ctx).forEach(function(e){l[e]=n.ctx[e]}))},inRange:function(e,t){var n=this._model;return n.line&&n.line.intersects(e,t,this.getHeight())||s.isOnLabel(e,t,n)},getCenterPoint:function(){return s.getCenterPoint(this._model.x1,this._model.x2,this._model.y1,this._model.y2)},getWidth:function(){return Math.abs(this._model.right-this._model.left)},getHeight:function(){return this._model.borderWidth||1},getArea:function(){return Math.sqrt(Math.pow(this.getWidth(),2)+Math.pow(this.getHeight(),2))},draw:function(){var e=this._view,t=this.chartInstance.chart.ctx;e.clip&&(t.save(),t.beginPath(),t.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),t.clip(),t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,t.setLineDash&&t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.stroke(),s.drawLabel(e,t,u),t.restore())}})}},{"../helpers.js":5,"../labelUtil.js":7,"../util.js":10}],10:[function(e,t,n){t.exports={horizontalKeyword:"horizontal",verticalKeyword:"vertical"}},{}]},{},[6]);